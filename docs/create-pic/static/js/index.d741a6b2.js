/*! @author fed@tigerbrokers.com */
webpackJsonp([0],{"2twT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("jyQm"),i=n.n(r),o=n("i+ms"),a=n.n(o),c=n("BNWl"),s=n.n(c),u=n("UM6j"),l=n.n(u),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){var e,n,r,i;h(this,t);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={img:null,loading:!0},r.create=function(){var e=r.props,t=e.config,n=e.width,i=e.height,o=e.background;return o&&(r.ctx.fillStyle=o,r.ctx.fillRect(0,0,n,i)),t.reduce(function(e,t){return e.then(function(){return new Promise(function(e){if(t.image){var n=new Image;n.onload=function(){r.drawImage(n,t.x,t.y,t.width,t.height),e()},n.onerror=function(){console.log(t.image+" \u56fe\u7247\u52a0\u8f7d\u5931\u8d25!"),e()},n.src=t.image}t.text&&(r.drawText(t),e())})})},Promise.resolve())},g(r,i=n)}return d(t,e),f(t,[{key:"componentDidMount",value:function e(){var t=this;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.props.width,this.canvas.height=this.props.height,this.create().then(function(){t.setState({loading:!1,img:t.canvas.toDataURL()})})}},{key:"drawImage",value:function e(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null==r[3]&&(r=r.slice(0,3)),(t=this.ctx).drawImage.apply(t,p(r))}},{key:"drawText",value:function e(t){var n=this.ctx;n.font=t.font||"30px arial",n.fillStyle=t.color;for(var r=t.width||this.props.width-t.x,i=t.lineHeight||1.4*n.measureText("\u70ed").width,o=0,a=0,c=0,s=a;s<t.text.length;s++)if("\n"===t.text[s])n.fillText(t.text.substring(a,s),this.countX(t.align,t.x,c,r),t.y+i*o),a=s,o++,c=0;else{var u=n.measureText(t.text[s]).width;if(c+u>r){var l=this.findWord(t.text,s),f=l.index,p=l.offset;f>=a&&this.isWordLetter(t.text[s])?(n.fillText(t.text.substring(a,f+1),this.countX(t.align,t.x,c-p,r),t.y+i*o),a=f+1,c=p):(n.fillText(t.text.substring(a,s),this.countX(t.align,t.x,c,r),t.y+i*o),a=s,c=u),o++}else s+1===t.text.length?n.fillText(t.text.substring(a),this.countX(t.align,t.x,c+u,r),t.y+i*o):c+=u}}},{key:"findWord",value:function e(t,n){for(var r=0;n--||0===n;){if(!this.isWordLetter(t[n]))return{index:n,offset:r};r+=this.ctx.measureText(t[n]).width}}},{key:"isWordLetter",value:function e(t){var n=t.charCodeAt(0);return n>=33&&n<=126}},{key:"countX",value:function e(t,n,r,i){switch(t){case"center":return n+i/2-r/2;case"right":return n+i-r;default:return n}}},{key:"render",value:function e(){var t=this.state,n=t.img,r=t.loading;return i.a.createElement("div",{className:"create-pic"},r?i.a.createElement("div",{className:"canvas-loading"},"\u56fe\u7247\u751f\u6210\u4e2d..."):i.a.createElement("img",{src:n,alt:"ouput",className:"canvas-image"}))}}]),t}(r.Component);y.propTypes={config:s.a.array.isRequired,width:s.a.number.isRequired,height:s.a.number.isRequired,background:s.a.string};var x=y;Object(o.render)(i.a.createElement(x,{config:[{image:n("ctKR"),x:0,y:0},{image:n("P8lh"),x:185,y:169},{image:n("NYbR"),x:0,y:598},{text:"qiqiboy",x:0,y:90,color:"#fff000",font:"50px Helvetica",align:"center"},{text:"        \u8fd9\u662f\u4e00\u6bb5\u52a8\u6001\u751f\u6210\u7684\u6587\u5b57\u3002\u629b\u51fa\u5f02\u5e38\uff1aIndexOutOfBoundsException: \u5f53\u53c2\u6570\u4e3a\u8d1f\u6570\u6216\u8005\u53c2\u6570\u4e0d\u5c0f\u4e8e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u65f6\u629b\u51fa\u3002\u82e5\u4f60\u4e0d\u6253\u7b97\u6301\u6709\u67d0\u53ea\u80a1\u7968\u8fbe\u5341\u5e74\uff0c\u5219\u5341\u5206\u949f\u4e5f\u4e0d\u8981\u6301\u6709\uff1b\n                -----\u80a1\u795e  \u6c83\u4f26\xb7\u5df4\u83f2\u7279",x:110,y:760,align:"left",width:500,color:"#4f2900",font:"24px Helvetica"}],width:750,height:1e3,background:"grey",canvas:!1}),document.getElementById("wrap"))},BNWl:function(e,t,n){var r,i,o;e.exports=n("IXMy")()},Hgk6:function(e,t,n){"use strict";var r=function e(t){};function i(e,t,n,i,o,a,c,s){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,a,c,s],f=0;(u=new Error(t.replace(/%s/g,function(){return l[f++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=i},IXMy:function(e,t,n){"use strict";var r=n("BS7Q"),i=n("Hgk6"),o=n("Sejl");e.exports=function(){function e(e,t,n,r,a,c){c!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},NYbR:function(e,t,n){e.exports=n.p+"static/images/juanzhou.6fdab531.png"},P8lh:function(e,t,n){e.exports=n.p+"static/images/1.f5a7f342.png"},Sejl:function(e,t,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},UM6j:function(e,t){},ctKR:function(e,t,n){e.exports=n.p+"static/images/bg.467c9618.jpg"}},["2twT"]);